<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="fonts.useso.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="objective-c,iOS,字符串,转载," />





  <link rel="alternate" href="/atom.xml" title="vvard3n's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="在每个应用里我们都大量使用字符串。下面我们将快速看看一些常见的操作字符串的方法，过一遍常见操作的最佳实践。">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS开发之玩转字符串">
<meta property="og:url" content="http://nvar.xyz/2014/06/07/iosstring/index.html">
<meta property="og:site_name" content="vvard3n's Blog">
<meta property="og:description" content="在每个应用里我们都大量使用字符串。下面我们将快速看看一些常见的操作字符串的方法，过一遍常见操作的最佳实践。">
<meta property="og:updated_time" content="2016-06-21T00:55:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS开发之玩转字符串">
<meta name="twitter:description" content="在每个应用里我们都大量使用字符串。下面我们将快速看看一些常见的操作字符串的方法，过一遍常见操作的最佳实践。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://nvar.xyz/2014/06/07/iosstring/"/>

  <title> iOS开发之玩转字符串 | vvard3n's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51513222-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?f7d05de4c415460201cbf2d7d4ac9cff";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">vvard3n's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">上善若水，人淡如菊</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                iOS开发之玩转字符串
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-06-07T22:55:46+08:00" content="2014-06-07">
              2014-06-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/objective-c/iOSDev/" itemprop="url" rel="index">
                    <span itemprop="name">iOSDev</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/06/07/iosstring/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/06/07/iosstring/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>在每个应用里我们都大量使用字符串。下面我们将快速看看一些常见的操作字符串的方法，过一遍常见操作的最佳实践。<br><a id="more"></a></p>
<h2 id="字符串的比较、搜索和排序"><a href="#字符串的比较、搜索和排序" class="headerlink" title="字符串的比较、搜索和排序"></a>字符串的比较、搜索和排序</h2><p>排序和比较字符串比第一眼看上去要复杂得多。不只是因为字符串可以包含<strong>代理对（surrogate pairs）</strong>(详见 <a href="http://www.objc.io/issue-9/unicode.html#peculiar-unicode-features" target="_blank" rel="external">Ole 写的这篇关于 Unicode 的文章</a>) ，而且比较还与字符串的本地化相关。在某些极端情况下相当棘手。</p>
<p>苹果文档中 String Programming Guide 里有一节叫做<strong> “字符与字形集群（Characters and Grapheme Clusters）” </strong>，里面提到一些陷阱。例如对于排序来说，一些欧洲语言将序列“ch”当作单个字母。在一些语言里，“ä”被认为等同于 ‘a’ ，而在其它语言里它却被排在 ‘z’ 后面。</p>
<p>而 NSString 有一些方法来帮助我们处理这种复杂性。首先看下面的方法：</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(NSComparisonResult)</span>compare:<span class="params">(NSString *)</span>aString</span><br><span class="line">                      options:<span class="params">(NSStringCompareOptions)</span>mask</span><br><span class="line">                        range:<span class="params">(NSRange)</span>range</span><br><span class="line">                       locale:<span class="params">(id)</span>locale</span><br></pre></td></tr></table></figure>
<p>它带给我们充分的灵活性。另外，还有很多“便捷函数”都使用了这个方法。</p>
<p>与比较有关的可用参数如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSCaseInsensitiveSearch</span></span><br><span class="line"><span class="built_in">NSLiteralSearch</span></span><br><span class="line"><span class="built_in">NSNumericSearch</span></span><br><span class="line"><span class="built_in">NSDiacriticInsensitiveSearch</span></span><br><span class="line"><span class="built_in">NSWidthInsensitiveSearch</span></span><br><span class="line"><span class="built_in">NSForcedOrderingSearch</span></span><br></pre></td></tr></table></figure>
<p>它们都可以用逻辑或运算组合在一起。</p>
<p>NSCaseInsensitiveSearch ：“A”等同于“a”，然而在某些地方还有更复杂的情况。例如，在德国，“ß” 和 “SS”是等价的。</p>
<p>NSLiteralSearch ：Unicode 的点对 Unicode 点比较。它只在所有字符都用相同的方式组成的情况下才会返回相等。LATIN CAPITAL LETTER A 加上 COMBINING RING ABOVE 并不等同于 LATIN CAPITAL LETTER A WITH RING ABOVE.</p>
<blockquote>
<p>译注：这个要解释一下，首先，每一个Unicode都是有官方名字的！LATIN CAPITAL &gt; LETTER A是一个大写“A”，COMBINING RING ABOVE是一个  ̊，LATIN CAPITAL &gt; LETTER A WITH RING ABOVE，这是Å前两者的组合不等同于后者。</p>
</blockquote>
<p>NSNumericSearch：它对字符串里的数字排序，所以 “Section 9” \&lt; “Section 20” \&lt; “Section 100.”</p>
<p>NSDiacriticInsensitiveSearch : “A” 等同于 “Å” 等同于 “Ä.”</p>
<p>NSWidthInsensitiveSearch : 一些东亚文字（平假名 和 片假名）有全宽与半宽两种形式。</p>
<p>很值得一提的是 - (NSComparisonResult)localizedStandardCompare: ，它排序的方式和 Finder 一样。它对应的选项是 NSCaseInsensitiveSearch 、 NSNumericSearch 、NSWidthInsensitiveSearch 以及 NSForcedOrderingSearch 。如果我们要在UI上显示一个文件列表，用它就最合适不过了。</p>
<p>大小写不敏感的比较和音调符号不敏感的比较都是相对复杂和昂贵的操作。如果我们需要比较很多次字符串那这就会成为一个性能上的瓶颈（例如对一个大的数据集进行排序），一个常见的解决方法是同时存储原始字符串和折叠字符串。例如，我们的 Contact  类有一个正常的 name  属性，在内部它还有一个foldedName  属性，它将自动在 name变化时更新。那么我们就可以使用 NSLiteralSearch  来比较 name  的折叠版本。 NSString  有一个方法来创建折叠版本：</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(NSString *)</span>stringByFoldingWithOptions:<span class="params">(NSStringCompareOptions)</span>options</span><br><span class="line">                                  locale:<span class="params">(NSLocale *)</span>locale</span><br></pre></td></tr></table></figure>
<h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p>要在一个字符串中搜索子字符串，最灵活性的方法是:</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(NSRange)</span>rangeOfString:<span class="params">(NSString *)</span>aString</span><br><span class="line">                 options:<span class="params">(NSStringCompareOptions)</span>mask</span><br><span class="line">                   range:<span class="params">(NSRange)</span>searchRange</span><br><span class="line">                  locale:<span class="params">(NSLocale *)</span>locale</span><br></pre></td></tr></table></figure>
<p>同时，还有一些“便捷方法”，它们在最终都会调用上面这个方法，我们可以传入上面列出的参数，以及以下这些额外的参数：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSBackwardsSearch</span></span><br><span class="line"><span class="built_in">NSAnchoredSearch</span></span><br><span class="line"><span class="built_in">NSRegularExpressionSearch</span></span><br></pre></td></tr></table></figure>
<p>NSBackwardsSearch ：在字符串的末尾开始反向搜索。</p>
<p>NSAnchoredSearch ： 只考虑搜索的起始点（单独使用）或终止点（当与 NSBackwardsSearch  结合使用时）。这个方法可以用来检查前缀或者后缀，以及<strong>大小写不敏感（case-insensitive）</strong>或者<strong>音调不敏感（diacritic-insensitive）</strong>的比较。</p>
<p>NSRegularExpressionSearch ：使用正则表达式搜索，要了解更多与使用正则表达式有关的信息，请关注 Chris’s 的 String Parsing 。</p>
<p>另外，还有一个方法：</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(NSRange)</span>rangeOfCharacterFromSet:<span class="params">(NSCharacterSet *)</span>aSet</span><br><span class="line">                           options:<span class="params">(NSStringCompareOptions)</span>mask</span><br><span class="line">                             range:<span class="params">(NSRange)</span>aRange</span><br></pre></td></tr></table></figure>
<p>与前面搜索字符串不同的是， 它只搜索给定字符集的第一个字符。即使只搜索一个字符，但如果由于此字符是由元字符组成的序列（composed character sequence），所以返回范围的长度也可能大于1。</p>
<h2 id="大写与小写"><a href="#大写与小写" class="headerlink" title="大写与小写"></a>大写与小写</h2><p>一定不要使用 NSString  的 -uppercaseString  或者 -lowercaseString  的方法来处理 UI 显示的字符串，而应该使用 -uppercaseStringWithLocale  来代替， 比如：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSString *<span class="built_in">name</span> = @<span class="string">"Tómas"</span>;</span><br><span class="line">cell.<span class="built_in">text</span> = [<span class="built_in">name</span> uppercaseStringWithLocale:[NSLocale currentLocale]];</span><br></pre></td></tr></table></figure>
<h2 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h2><p>同C语言中的 sprintf 函数( ANSI C89 中的一个函数 )类似, Objective C 中的 NSString 类也有如下的3个方法:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="string">initWithFormat:</span></span><br><span class="line">-<span class="string">initWithFormat:</span><span class="string">arguments:</span></span><br><span class="line">+<span class="string">stringWithFormat:</span></span><br></pre></td></tr></table></figure>
<p>需要注意这些格式化方法都是 非本地化 的 。所以这些方法得到的字符串是不能直接拿来显示在用户界面上的。如果需要本地化，那我们需要使用下面这些方法:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="string">initWithFormat:</span><span class="string">locale:</span></span><br><span class="line">-<span class="string">initWithFormat:</span><span class="string">locale:</span><span class="string">arguments:</span></span><br><span class="line">+<span class="string">localizedStringWithFormat:</span></span><br></pre></td></tr></table></figure>
<p>Florian 有一篇关于 <a href="http://www.objc.io/issue-9/string-localization.html#localized-format-strings" target="_blank" rel="external">字符串的本地化</a> 的文章更详细地讨论了这个问题。</p>
<p>printf(3)的man页面有关于它如何格式化字符串的全部细节。除了所谓的转换格式（它以％字符开始），格式化字符串会被逐字复制：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> a = <span class="number">25812.8074434</span>;</span><br><span class="line"><span class="keyword">float</span> b = <span class="number">376.730313461</span>;</span><br><span class="line"><span class="built_in">NSString</span> *s = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%g :: %g"</span>, a, b];</span><br><span class="line"><span class="comment">// "25812.8 :: 376.73"</span></span><br></pre></td></tr></table></figure>
<p>我们格式化了两个浮点数。注意单精度浮点数和双精度浮点数共同了一个转换格式。</p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><p>除了来自 printf(3) 的转换规范，我们还可以使用 %@  来输出一个对象。在对象描述那一节中有述，如果对象响应 -descriptionWithLocale:  方法，则调用它，否则调用 -description 。  %@  被结果替换。</p>
<h2 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h2><p>使用整形数字时，有些需要注意的细节。首先，有符号数（d和i）和无符号数（o、u、x和X）分别有转换规范。需要使用者选择具体的类型。</p>
<p>如果我们使用的东西是 printf不知道的，我们必须要做类型转换。 NSUInteger  正是这样一个例子，它在64位和32位平台上是不一样的。下面的例子可以同时工作在32位和64位平台。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uint64_t p = <span class="number">2305843009213693951</span>;</span><br><span class="line"><span class="built_in">NSString</span> *s = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"The ninth Mersenne prime is %llu"</span>, (<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>) p];</span><br><span class="line"><span class="comment">// "The ninth Mersenne prime is 2305843009213693951"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Modifier       d, i            o, u, x, X</span><br><span class="line">-------------- --------------- ----------------------</span><br><span class="line">hh               <span class="keyword">signed</span> <span class="keyword">char</span>     <span class="keyword">unsigned</span> <span class="keyword">char</span></span><br><span class="line">h                <span class="keyword">short</span>           <span class="keyword">unsigned</span> <span class="keyword">short</span></span><br><span class="line">(none)           <span class="keyword">int</span>             <span class="keyword">unsigned</span> <span class="keyword">int</span></span><br><span class="line">l (ell)          <span class="keyword">long</span>            <span class="keyword">unsigned</span> <span class="keyword">long</span></span><br><span class="line">ll (ell ell)     <span class="keyword">long</span> <span class="keyword">long</span>       <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span></span><br><span class="line">j                intmax\_t       uintmax\_t</span><br><span class="line">t                ptrdiff\_t    </span><br><span class="line">z                                <span class="built_in">size</span>\_t</span><br></pre></td></tr></table></figure>
<p>适用于整数的转换规则有：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int m = -<span class="number">150004021</span><span class="comment">;</span></span><br><span class="line">uint n = <span class="number">150004021</span>U<span class="comment">;</span></span><br><span class="line">NSString *s = [NSString stringWithFormat:@"d:%d i:%i o:%o u:%u x:%x X:%X", m, m, n, n, n, n]<span class="comment">;</span></span><br><span class="line">// "d:-<span class="number">150004021</span> i:-<span class="number">150004021</span> o:<span class="number">1074160465</span> u:<span class="number">150004021</span> x:<span class="number">8f0e135</span> X:<span class="number">8F0E135</span>"</span><br></pre></td></tr></table></figure>
<p>%d  和 %i  具有一样的功能，它们都打印出有符号十进制数。 %o  就较为晦涩了：它使用八进制表示。 %u  输出无符号十进制数——它是我们常用的。最后 %x  和 %X  使用十六进制表示——后者使用大写字母。</p>
<p>对于 x%  和 X%  ，我们可以在 0x 前面添加 “#” 井字符前缀看，增加可读性。</p>
<p>我们可以传入特定参数，来设置最小字段宽度和最小数字位数（默认两者都是0），以及左/右对齐。请查看man页面获取详细信息。下面是一些例子：</p>
<figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int m = <span class="number">42</span>;</span><br><span class="line">NSString *s = [NSString stringWithFormat:@<span class="string">"'</span>%<span class="number">4</span>d<span class="string">' '</span>%<span class="number">-4</span>d<span class="string">' '</span>%+<span class="number">4</span>d<span class="string">' '</span>%<span class="number">4.3</span>d<span class="string">' '</span>%<span class="number">04</span>d<span class="string">'"</span>, m, m, m, m, m];</span><br><span class="line"><span class="comment">// ‘42’ ‘42 ’ ‘ +42’ ‘ 042’ ‘0042’</span></span><br><span class="line">m = <span class="number">-42</span>;</span><br><span class="line">NSString *s = [NSString stringWithFormat:@<span class="string">"'</span>%<span class="number">4</span>d<span class="string">' '</span>%<span class="number">-4</span>d<span class="string">' '</span>%+<span class="number">4</span>d<span class="string">' '</span>%<span class="number">4.3</span>d<span class="string">' '</span>%<span class="number">04</span>d<span class="string">'"</span>, m, m, m, m, m];</span><br><span class="line"><span class="comment">// ‘ -42’ ‘-42 ’ ‘ -42’ ‘-042’ ‘-042’</span></span><br></pre></td></tr></table></figure>
<p>%p  可用于打印出指针——它和 %#x  相似但可同时在32位和64位平台上正常工作。</p>
<h2 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h2><p>关于浮点数的转换规则有8个：eEfFgGaA。但除了 %f 和 %g 外我们很少使用其它的。对于指数部分，小写的版本使用小写 e，大写的版本就使用大写 E。</p>
<p>通常 ％g  是浮点数的全能转换符 ，它与 %f  的不同在下面的例子里显示得很清楚：</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">double v[<span class="number">5</span>] = &#123;<span class="number">12345</span>, <span class="number">12</span>, <span class="number">0.12</span>, <span class="number">0.12345678901234</span>, <span class="number">0.0000012345678901234</span>&#125;;</span><br><span class="line"><span class="symbol">NSString</span> *s = [<span class="symbol">NSString</span> stringWithFormat:@<span class="string">"%g %g %g %g %g"</span>, v[<span class="number">0</span>], v[<span class="number">1</span>], v[<span class="number">2</span>], v[<span class="number">3</span>], v[<span class="number">4</span>]];</span><br><span class="line">// <span class="string">"12345 12 0.12 0.123457 1.23457e-06"</span></span><br><span class="line"><span class="symbol">NSString</span> *s = [<span class="symbol">NSString</span> stringWithFormat:@<span class="string">"%f %f %f %f %f"</span>, v[<span class="number">0</span>], v[<span class="number">1</span>], v[<span class="number">2</span>], v[<span class="number">3</span>], v[<span class="number">4</span>]];</span><br><span class="line">// <span class="string">"12345.000000 12.000000 0.120000 0.123457 0.000001"</span></span><br></pre></td></tr></table></figure>
<p>和整数一样，我们依然可以指定最小字段宽度和最小数字数。</p>
<h2 id="指定位置"><a href="#指定位置" class="headerlink" title="指定位置"></a>指定位置</h2><p>格式化字符串允许使用参数来改变顺序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[NSString stringWithFormat:@<span class="string">"%2<span class="variable">$@</span> %1<span class="variable">$@</span>"</span>, @<span class="string">"1st"</span>, @<span class="string">"2nd"</span>];</span><br><span class="line">// <span class="string">"2nd 1st"</span></span><br></pre></td></tr></table></figure>
<p>我们只需将从1开始的参数与一个$接在%后面。这种写法在进行本地化的时候极其常见，因为在不同语言中，各个参数所处的顺序位置可能不尽相同。</p>
<h2 id="NSLog"><a href="#NSLog" class="headerlink" title="NSLog()"></a>NSLog()</h2><p>NSLog() 函数与  +stringWithFormat: 的工作方式一样。我们可以调用：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> magic = <span class="number">42</span>;</span><br><span class="line">NSLog(@"The answer is %d<span class="string">", magic);</span></span><br></pre></td></tr></table></figure>
<p>下面的代码可以用同样的方式构造字符串：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> magic = <span class="number">42</span>;</span><br><span class="line"><span class="built_in">NSString</span> *output = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"The answer is %d"</span>, magic];</span><br></pre></td></tr></table></figure>
<p>显然  NSLog()会输出字符串，并且它会加上时间戳、进程名、进程ID以及线程ID作为前缀。</p>
<h2 id="实现能接受格式化字符串的方法"><a href="#实现能接受格式化字符串的方法" class="headerlink" title="实现能接受格式化字符串的方法"></a>实现能接受格式化字符串的方法</h2><p>有时在我们自己的类中提供一个能接受格式化字符串的方法会很方便使用。假设我们要实现的是一个 To Do 应用，它包含一个 Item 类。我们想要提供：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (instance<span class="keyword">type</span>)itemWithTitleFormat:(<span class="type">NSString</span> *)format, ...</span><br></pre></td></tr></table></figure>
<p>如此我们就可以使用：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Item </span>*<span class="keyword">item </span>= [<span class="keyword">Item </span><span class="keyword">itemWithFormat:@"Need </span>to <span class="keyword">buy </span>%<span class="comment">@ for %@", food, pet];</span></span><br></pre></td></tr></table></figure>
<p>这种类型的方法可以接受可变数量的参数，所以被称为可变参数方法。我们必须使用一个定义在stdarg.h里的宏来使用可变参数。上面方法的实现代码可能会像下面这样：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ (instancetype)itemWithTitleFormat:(NSString *)<span class="keyword">format</span>, ...;</span><br><span class="line">&#123;</span><br><span class="line">    va_list <span class="keyword">ap</span>;</span><br><span class="line">    va_start(<span class="keyword">ap</span>, <span class="keyword">format</span>);</span><br><span class="line">    NSString *title = [[NSString alloc] initWithFormat:<span class="keyword">format</span> locale:[NSLocale currentLocale] arguments:<span class="keyword">ap</span>];</span><br><span class="line">    va_end(<span class="keyword">ap</span>);</span><br><span class="line">    <span class="keyword">return</span> [self itemWithTitle:title];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>进一步，我们要添加 <code>NS_FORMAT_FUNCTION</code> 到方法的定义里（在头文件中），如下所示：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (instance<span class="keyword">type</span>)itemWithTitleFormat:(<span class="type">NSString</span> *)format, ... <span class="type">NS_FORMAT_FUNCTION</span>(1,2);</span><br></pre></td></tr></table></figure>
<p><code>NS_FORMAT_FUNCTION</code> 展开为一个方法 <code>__attribute__</code>，它会告诉编译器在索引1处的参数是一个格式化字符串，而实际参数从索引2开始。这将允许编译器检查格式化字符串而且会像 NSLog() 和 -[NSString stringWithFormat:] 一样输出警告信息。</p>
<h2 id="字符与字符串组件"><a href="#字符与字符串组件" class="headerlink" title="字符与字符串组件"></a>字符与字符串组件</h2><p>如有一个字符串 “bird” ，找出组成它的独立字母是很简单的。第二个字母是“i”（Unicode: LATIN SMALL LETTER I）。而对于像Åse这样的字符串就没那么简单了。看起来像三个字母的组合可有多种方式，例如：</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A LATIN CAPITAL LETTER A</span><br><span class="line">̊ COMBINING RING ABOVE</span><br><span class="line"><span class="keyword">s</span> LATIN SMALL LETTER <span class="keyword">S</span></span><br><span class="line">e LATIN SMALL LETTER E</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Å LATIN CAPITAL LETTER A WITH RING ABOVE</span><br><span class="line"><span class="keyword">s</span> LATIN SMALL LETTER <span class="keyword">S</span></span><br><span class="line">e LATIN SMALL LETTER E</span><br></pre></td></tr></table></figure>
<p>从 [Ole 写的这篇关于 Unicode 的文章][<a href="http://www.objc.io/issue-9/unicode.html#peculiar-unicode-features" target="_blank" rel="external">http://www.objc.io/issue-9/unicode.html#peculiar-unicode-features</a>] 里可以读到更多关于<strong>联合标记（combining marks）</strong>的信息，其他语言文字有更多复杂的<strong>代理对（complicated surrogate pairs）</strong>。</p>
<p>如果我们要在字符层面处理一个字符串，那我们就要小心翼翼。苹果官方文档中 String Programming Guide 有一节叫做 “Characters and Grapheme Clusters”，里面有更多关于这一点的细节。<br>NSString有两个方法：</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"><span class="symbol">rangeOfComposedCharacterSequencesForRange:</span></span><br><span class="line"></span>-<span class="ruby"><span class="symbol">rangeOfComposedCharacterSequenceAtIndex:</span></span></span><br></pre></td></tr></table></figure>
<p>上面这两个方法在有的时候很有帮助，例如，分开一个字符串时保证我们不会分开被称为代理对（surrogate pairs）的东西。</p>
<p>如果我们要在字符串的字符上做工作， NSString 有个叫做 -enumerateSubstringsInRange:options:usingBlock: 的方法。</p>
<p>将 NSStringEnumerationByComposedCharacterSequences 作为选项传递，我们就能扫描所有的字符。例如，用下面的方法，我们可将字符串 “International Business Machines” 变成 “IBM”。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *)initials;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableString</span> *result = [<span class="built_in">NSMutableString</span> string];</span><br><span class="line">    [<span class="keyword">self</span> enumerateSubstringsInRange:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, <span class="keyword">self</span>.length)</span><br><span class="line">                             options:<span class="built_in">NSStringEnumerationByWords</span> | <span class="built_in">NSStringEnumerationLocalized</span></span><br><span class="line">                          usingBlock:^(<span class="built_in">NSString</span> *word, <span class="built_in">NSRange</span> wordRange, <span class="built_in">NSRange</span> enclosingWordRange, <span class="built_in">BOOL</span> *stop1) &#123;</span><br><span class="line">        __block <span class="built_in">NSString</span> *firstLetter = <span class="literal">nil</span>;</span><br><span class="line">        [<span class="keyword">self</span> enumerateSubstringsInRange:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, word.length)</span><br><span class="line">                                 options:<span class="built_in">NSStringEnumerationByComposedCharacterSequences</span></span><br><span class="line">                              usingBlock:^(<span class="built_in">NSString</span> *letter, <span class="built_in">NSRange</span> letterRange, <span class="built_in">NSRange</span> enclosingLetterRange, <span class="built_in">BOOL</span> *stop2) &#123;</span><br><span class="line">            firstLetter = letter;</span><br><span class="line">            *stop2 = <span class="literal">YES</span>;</span><br><span class="line">        &#125;];</span><br><span class="line">        <span class="keyword">if</span> (letter != <span class="literal">nil</span>) &#123;</span><br><span class="line">            [result appendString:letter];</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如文档所示，词和句的分界可能基于地区的变化而变化。因此有 NSStringEnumerationLocalized选项。</p>
<h2 id="多行文字字面量"><a href="#多行文字字面量" class="headerlink" title="多行文字字面量"></a>多行文字字面量</h2><p>编译器的确有一个隐蔽的特性：把空格分隔开的字符串衔接到一起。这是什么意思呢？下面两段代码是完全等价的：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSString *limerick = <span class="comment">@"A lively young damsel named Menzies\n"</span><br><span class="line">@</span><span class="string">"Inquired: «Do you know what this thenzies?»\n"</span></span><br><span class="line"><span class="comment">@"Her aunt, with a gasp,\n"</span><br><span class="line">@</span><span class="string">"Replied: "</span>It's a wasp,\n<span class="string">"</span><br><span class="line">@"</span><span class="keyword">And</span> you're holding the <span class="keyword">end</span> <span class="built_in">where</span> the stenzies.\n<span class="string">";</span></span><br></pre></td></tr></table></figure>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">NSString</span> *limerick = <span class="comment">@"A lively young damsel named Menzies\nInquired: «Do you know what this thenzies?»\nHer aunt, with a gasp,\nReplied: "It's a wasp,\nAnd you're holding the end where the stenzies.\n";</span></span><br></pre></td></tr></table></figure>
<p>前者看起来更舒服，但是有一点要注意千万不要在任意一行末尾加入逗号或者分号。</p>
<p>同时也可以这样做：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString * <span class="keyword">string</span> = <span class="comment">@"The man " @</span><span class="string">"who knows everything "</span> <span class="comment">@"learns nothing" @</span><span class="string">"."</span>;</span><br></pre></td></tr></table></figure>
<p>译者注：上面这行代码原文是有误的，原文是 <code>NSString * @&quot;The man &quot; @&quot;who knows everything &quot; @&quot;learns nothing&quot; @&quot;.&quot;  ，读者可以尝试一下，如果这样写是无法通过编译的。</code></p>
<p>编译器只是为我们提供了一个便捷的方式，将多个字符串在编译期组合在了一起。</p>
<h2 id="可变字符串"><a href="#可变字符串" class="headerlink" title="可变字符串"></a>可变字符串</h2><p>可变字符串有两个常见的使用场景：（1）拼接字符串（2）替换部分字符串</p>
<h2 id="创建字符串"><a href="#创建字符串" class="headerlink" title="创建字符串"></a>创建字符串</h2><p>可变字符串可以很轻易地把多个字符串在你需要的时候组合起来。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (NSString *)magicToken</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableString *<span class="built_in">string</span> = [NSMutableString <span class="built_in">string</span>];</span><br><span class="line">    <span class="keyword">if</span> (usePrefix) &#123;</span><br><span class="line">        [<span class="built_in">string</span> appendString:@<span class="string">"&gt;&gt;&gt;"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="built_in">string</span> appendFormat:@<span class="string">"%d--%d"</span>, self.foo, self.bar];</span><br><span class="line">    <span class="keyword">if</span> (useSuffix) &#123;</span><br><span class="line">        [<span class="built_in">string</span> appendString:@<span class="string">"&gt;&gt;&gt;"</span>];</span><br><span class="line">    &#125;</span><br><span class="line"><span class="built_in">    return</span> <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里要注意的是，虽然原本返回值应该是一个 NSString  类型的对象，我们只是简单地返回一个NSMutableString 类型的对象。</p>
<h2 id="替换字符串"><a href="#替换字符串" class="headerlink" title="替换字符串"></a>替换字符串</h2><p>可变字符串除了追加组合之外，还提供了以下4个方法：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-<span class="string">deleteCharactersInRange:</span></span><br><span class="line">-<span class="string">insertString:</span><span class="string">atIndex:</span></span><br><span class="line">-<span class="string">replaceCharactersInRange:</span><span class="string">withString:</span></span><br><span class="line">-<span class="string">replaceOccurrencesOfString:</span><span class="string">withString:</span><span class="string">options:</span><span class="string">range:</span></span><br></pre></td></tr></table></figure>
<p>这些方法和 NSString 的类似：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="string">stringByReplacingOccurrencesOfString:</span><span class="string">withString:</span></span><br><span class="line">-<span class="string">stringByReplacingOccurrencesOfString:</span><span class="string">withString:</span><span class="string">options:</span><span class="string">range:</span></span><br><span class="line">-<span class="string">stringByReplacingCharactersInRange:</span><span class="string">withString:</span></span><br></pre></td></tr></table></figure>
<p>但是它没有创建新的字符串仅仅把当前字符串变成了一个可变的类型，这样让代码更容易阅读，以及提升些许性能。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSMutableString</span> *string; <span class="comment">// 假设我们已经有了一个名为 string 的字符串</span></span><br><span class="line"><span class="comment">// 现在要去掉它的一个前缀，做法如下:</span></span><br><span class="line"><span class="built_in">NSString</span> *prefix = <span class="string">@"WeDon’tWantThisPrefix"</span></span><br><span class="line"><span class="built_in">NSRange</span> r = [string rangeOfString:prefix</span><br><span class="line">                          options:<span class="built_in">NSAnchoredSearch</span></span><br><span class="line">                            range:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, string.length)</span><br><span class="line">                           locale:<span class="literal">nil</span>];</span><br><span class="line"><span class="keyword">if</span> (r.location != <span class="built_in">NSNotFound</span>) &#123;</span><br><span class="line">    [string deleteCharactersInRange:r];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="连接组件"><a href="#连接组件" class="headerlink" title="连接组件"></a>连接组件</h2><p>一个看似微不足道但很常见的情况是字符串连接。比如现在有这样几个字符串：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Hildr</span><br><span class="line">Heidrun</span><br><span class="line">Gerd</span><br><span class="line">Guðrú<span class="keyword">n</span></span><br><span class="line">Freya</span><br><span class="line">Nanna</span><br><span class="line">Siv</span><br><span class="line">Skað<span class="built_in">i</span></span><br><span class="line"><span class="keyword">Gr</span>óa</span><br></pre></td></tr></table></figure>
<p>我们想用它们来创建下面这样的一个字符串：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hildr, Heidrun, Gerd, Guðrún, Freya, Nanna, Siv, Skað<span class="selector-tag">i</span>, Gróa</span><br></pre></td></tr></table></figure>
<p>那么就可以这样做：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSArray *names = @[<span class="string">"Hildr"</span>, @<span class="string">"Heidrun"</span>, @<span class="string">"Gerd"</span>, @<span class="string">"Guðrún"</span>, @<span class="string">"Freya"</span>, @<span class="string">"Nanna"</span>, @<span class="string">"Siv"</span>, @<span class="string">"Skaði"</span>, @<span class="string">"Gróa"</span>]<span class="comment">;</span></span><br><span class="line">NSString *result = [names componentsJoinedByString:@<span class="string">", "</span>]<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>如果我们将其显示给用户，我们就要使用本地化表达，确保将最后一部分替换相应语言的 , and ：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSArray</span> (<span class="title">ObjcIO_GroupedComponents</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)groupedComponentsWithLocale:(<span class="built_in">NSLocale</span> *)locale;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.count &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">@""</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">self</span>.count &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>[<span class="number">0</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">self</span>.count &lt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *joiner = <span class="built_in">NSLocalizedString</span>(<span class="string">@"joiner.2components"</span>, <span class="string">@""</span>);</span><br><span class="line">        <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@%@"</span>, <span class="keyword">self</span>[<span class="number">0</span>], joiner, <span class="keyword">self</span>[<span class="number">1</span>]];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *joiner = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ "</span>, [locale objectForKey:<span class="built_in">NSLocaleGroupingSeparator</span>]];</span><br><span class="line">        <span class="built_in">NSArray</span> *first = [<span class="keyword">self</span> subarrayWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, <span class="keyword">self</span>.count - <span class="number">1</span>)];</span><br><span class="line">        <span class="built_in">NSMutableString</span> *result = [<span class="built_in">NSMutableString</span> stringWithString:[first componentsJoinedByString:joiner]];</span><br><span class="line">        <span class="built_in">NSString</span> *lastJoiner = <span class="built_in">NSLocalizedString</span>(<span class="string">@"joiner.3components"</span>, <span class="string">@""</span>);</span><br><span class="line">        [result appendString:lastJoiner];</span><br><span class="line">        [result appendString:<span class="keyword">self</span>.lastObject];</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>那么在本地化的时候，如果是英语，应该是：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"joiner.2components"</span> = <span class="string">" and "</span><span class="comment">;</span></span><br><span class="line"><span class="string">"joiner.3components"</span> = <span class="string">", and "</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>如果是德语，则应该是：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"joiner.2components"</span> = <span class="string">" und "</span><span class="comment">;</span></span><br><span class="line"><span class="string">"joiner.3components"</span> = <span class="string">" und "</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>结合组件的逆过程可以用   -componentsSeparatedByString: ，这个方法会将一个字符串变成一个数组。例如，将 “12|5|3” 变成 “12”、“5” 和 “3”。</p>
<h2 id="对象描述"><a href="#对象描述" class="headerlink" title="对象描述"></a>对象描述</h2><p>在许多面向对象编程语言里，对象有一个叫做 toString() 或类似的方法。在 Objective C 里，这个方法是：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>(NSString <span class="strong">*)description</span></span><br></pre></td></tr></table></figure>
<p>以及它的兄弟方法:</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>(NSString <span class="strong">*)debugDescription</span></span><br></pre></td></tr></table></figure>
<p>当自定义模型对象时，覆写 -description 方法是一个好习惯，在UI上显示该对象时调用的就是description方法的返回值。假定我们有一个 Contact类，下面是它的 description方法实现。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-</span> (NSString *)<span class="selector-tag">description</span></span><br><span class="line">&#123;</span><br><span class="line">    return self<span class="selector-class">.name</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以像下面代码这样格式化字符串：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">label.<span class="keyword">text</span> = [NSString stringWithFormat:NSLocalizedString(@"%@ has been added to the <span class="keyword">group</span> “%@”.<span class="string">", @"</span><span class="string">"), contact, group];</span></span><br></pre></td></tr></table></figure>
<p>因为该字符串是用来做UI显示的，我们可能需要做本地化，那么我们就需要覆写<code>descriptionWithLocale:(NSLocale *)locale</code>方法。</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="name">NSString</span> *)descriptionWithLocale:(NSLocale *)locale<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>%@ 会首先调用 -descriptionWithLocale，如果没有返回值，再调用 -description，在调试时，打印一个对象，我们用 po这个命令（它是print object的缩写）</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">lldb</span>) po contact</span><br></pre></td></tr></table></figure>
<p>如果在调试窗口的终端下输入 po contact, 它会调用对象的 debugDescription方法。默认情况下debugDescription是直接调用 description。如果你希望输出不同的信息，那么就分别覆写两个方法。大多数情况下，尤其是对于非数据模型的对象，你只需要覆写 -description就能满足需求了。</p>
<p>实际上对象的标准格式化输出是这样的：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *)description;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"&lt;%@: %p&gt;"</span>, <span class="keyword">self</span>.class, <span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>NSObject就是这么干的。当你覆写该方法时，也可以像这样写。假定我们有一个DetailViewController，在它的UI上要显示一个 contact ，我们可能会这样覆写该方法：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *)description;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"&lt;%@: %p&gt; contact = %@"</span>, <span class="keyword">self</span>.class, <span class="keyword">self</span>, <span class="keyword">self</span>.contact.debugDescription];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="NSManagedObject子类的描述"><a href="#NSManagedObject子类的描述" class="headerlink" title="NSManagedObject子类的描述"></a>NSManagedObject子类的描述</h2><p>我们将特别注意向 NSManagedObject 的子类添加 -description / -debugDescription 的情况。由于 Core Data的<strong>惰性加载机制（faulting mechanism）</strong>允许未加载数据的对象存在，所以当我们调用 -debugDescription 我们并不希望改变我们的应用程序的状态，因此我要确保检查 isFault  这个属性。例如，我们可如下这样实现它：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *)debugDescription;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableString</span> *description = [<span class="built_in">NSMutableString</span> stringWithFormat:<span class="string">@"&lt;%@: %p&gt;"</span>, <span class="keyword">self</span>.class, <span class="keyword">self</span>];</span><br><span class="line">    <span class="keyword">if</span> (! <span class="keyword">self</span>.isFault) &#123;</span><br><span class="line">        [description appendFormat:<span class="string">@" %@ \"%@\" %gL"</span>, <span class="keyword">self</span>.identifier, <span class="keyword">self</span>.name, <span class="keyword">self</span>.metricVolume];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次，因为它们是模型对象，重载 -description 简单地返回描述实例的属性名就可以了。</p>
<h2 id="文件路径"><a href="#文件路径" class="headerlink" title="文件路径"></a>文件路径</h2><p>简单来说就是我们不应该使用 NSString来描述文件路径。对于 OS X 10.7 和 iOS 5， NSURL更便于使用，而且更有效率，它还能缓存文件系统的属性。</p>
<p>再者， NSURL 有八个方法来访问被称为 resource values 的东西。它们提供给我们一个稳定的接口来获取和设置文件与目录的多种属性，例如本地化文件名（ NSURLLocalizedNameKey）、文件大小（NSURLFileSizeKey），以及创建日期（ NSURLCreationDateKey），等等。</p>
<p>尤其是在遍历目录内容时，使用 <code>-[NSFileManagerenumeratorAtURL:includingPropertiesForKeys:options:errorHandler:]</code> 附带一个关键词列表，然后用 -getResourceValue:forKey:error: 检索它们，能带来显著的性能提升。</p>
<p>下面是一个简短的例子展示了如何将它们组合在一起：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</span><br><span class="line"><span class="built_in">NSFileManager</span> *fm = [[<span class="built_in">NSFileManager</span> alloc] init];</span><br><span class="line"><span class="built_in">NSURL</span> *documents = [fm URLForDirectory:<span class="built_in">NSDocumentationDirectory</span></span><br><span class="line">                              inDomain:<span class="built_in">NSUserDomainMask</span></span><br><span class="line">                     appropriateForURL:<span class="literal">nil</span></span><br><span class="line">                                create:<span class="literal">NO</span></span><br><span class="line">                                 error:&amp;error];</span><br><span class="line"><span class="built_in">NSArray</span> *properties = @[<span class="built_in">NSURLLocalizedNameKey</span>, <span class="built_in">NSURLCreationDateKey</span>];</span><br><span class="line"><span class="built_in">NSDirectoryEnumerator</span> *dirEnumerator = [fm enumeratorAtURL:documents</span><br><span class="line">                                includingPropertiesForKeys:properties</span><br><span class="line">                                                   options:<span class="number">0</span></span><br><span class="line">                                              errorHandler:<span class="literal">nil</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSURL</span> *fileURL <span class="keyword">in</span> dirEnumerator) &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *name = <span class="literal">nil</span>;</span><br><span class="line">    <span class="built_in">NSDate</span> *creationDate = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">if</span> ([fileURL getResourceValue:&amp;name</span><br><span class="line">                           forKey:<span class="built_in">NSURLLocalizedNameKey</span></span><br><span class="line">                            error:<span class="literal">NULL</span>] &amp;&amp;</span><br><span class="line">        [fileURL getResourceValue:&amp;creationDate</span><br><span class="line">                           forKey:<span class="built_in">NSURLCreationDateKey</span></span><br><span class="line">                            error:<span class="literal">NULL</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"'%@' was created at %@"</span>, name, creationDate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们把属性的键传给  -enumeratorAtURL: 方法中，在遍历目录内容时，这个方法能确保用非常高效的方式获取它们。在循环中，调用 -getResourceValue:… 能简单地从 NSURL 得到已缓存的值，而不用去访问文件系统。</p>
<h2 id="传递路径到UNIX-API"><a href="#传递路径到UNIX-API" class="headerlink" title="传递路径到UNIX API"></a>传递路径到UNIX API</h2><p>因为 Unicode 非常复杂，同一个字母有多种表示方式，所以我们需要很小心地传递路径给UNIX API。在这些情况里，一定不能使用 UTF8String ，正确地做法是使用 -fileSystemRepresentation 方法，如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURL</span> *documentURL = [[<span class="built_in">NSFileManager</span> defaultManager] URLForDirectory:<span class="built_in">NSDocumentDirectory</span></span><br><span class="line">                                                            inDomain:<span class="built_in">NSUserDomainMask</span></span><br><span class="line">                                                   appropriateForURL:<span class="literal">nil</span></span><br><span class="line">                                                              create:<span class="literal">NO</span></span><br><span class="line">                                                               error:<span class="literal">NULL</span>];</span><br><span class="line">documentURL = [documentURL URLByAppendingPathComponent:name];</span><br><span class="line"><span class="keyword">int</span> fd = open(documentURL.fileSystemRepresentation, O_RDONLY);</span><br></pre></td></tr></table></figure>
<p>与 NSURL 类似，同样的情况也发生在 NSString 上。如果我们不这么做，在打开一个文件名或路径名包含合成字符的文件时我们将看到随机错误。在 OS X 上，当用户的短名刚好包含合成字符时就会显得特别糟糕。</p>
<p>我们需要一个 <code>char const *</code> 版本的路径的一些常见情况是UNIX open() 和 close() 指令。但这也可能发生在 GCD / libdispatch 的 I/O API 上。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_io_t</span></span><br><span class="line">dispatch_io_create_with_path(<span class="keyword">dispatch_io_type_t</span> type,</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">int</span> oflag, <span class="keyword">mode_t</span> mode,</span><br><span class="line">        <span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span>,</span><br><span class="line">        <span class="keyword">void</span> (^cleanup_handler)(<span class="keyword">int</span> error));</span><br></pre></td></tr></table></figure>
<p>如果我们要使用 NSString 来做，那我们要保证像下面这样做：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSString *<span class="built_in">path</span> = ... // 假设我们已经有一个名为 <span class="built_in">path</span> 的字符串</span><br><span class="line">io = dispatch_io_create_with_path(DISPATCH_IO_STREAM,</span><br><span class="line">    <span class="built_in">path</span>.fileSystemRepresentation,</span><br><span class="line">    O_RDONLY, <span class="number">0</span>, queue, cleanupHandler);</span><br></pre></td></tr></table></figure>
<p>-fileSystemRepresentation 所做的是它首先将这个字符串转换成文件系统的规范形式然后用UTF-8编码。</p>
<p>原文 <a href="http://www.objc.io/issue-9/working-with-strings.html" target="_blank" rel="external">Working with Strings</a><br>翻译 <a href="http://iosinit.com/?p=854" target="_blank" rel="external">iosinit</a><br>via <a href="http://blog.jobbole.com/62477/" target="_blank" rel="external">伯乐在线</a></p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/objective-c/" rel="tag">#objective-c</a>
          
            <a href="/tags/iOS/" rel="tag">#iOS</a>
          
            <a href="/tags/字符串/" rel="tag">#字符串</a>
          
            <a href="/tags/转载/" rel="tag">#转载</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/06/07/garagebandmusic/" rel="next" title="GarageBand自创小曲儿">
                <i class="fa fa-chevron-left"></i> GarageBand自创小曲儿
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/08/24/nbyz/" rel="prev" title="年宝玉则－郎木寺－花湖9日之旅[100P+，慎入！多图杀猫]">
                年宝玉则－郎木寺－花湖9日之旅[100P+，慎入！多图杀猫] <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a>
    <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
    <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a class="bds_count" data-cmd="count"></a>
  </div>
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "2",
        "bdMiniList": false,
        "bdPic": ""
      },
      "share": {
        "bdSize": "16",
        "bdStyle": "0"
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="vvard3n" />
          <p class="site-author-name" itemprop="name">vvard3n</p>
          <p class="site-description motion-element" itemprop="description">「Stay hungry. Stay foolish.」</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">34</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串的比较、搜索和排序"><span class="nav-number">1.</span> <span class="nav-text">字符串的比较、搜索和排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#搜索"><span class="nav-number">2.</span> <span class="nav-text">搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#大写与小写"><span class="nav-number">3.</span> <span class="nav-text">大写与小写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#格式化字符串"><span class="nav-number">4.</span> <span class="nav-text">格式化字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象"><span class="nav-number">5.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#整数"><span class="nav-number">6.</span> <span class="nav-text">整数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#浮点数"><span class="nav-number">7.</span> <span class="nav-text">浮点数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指定位置"><span class="nav-number">8.</span> <span class="nav-text">指定位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NSLog"><span class="nav-number">9.</span> <span class="nav-text">NSLog()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实现能接受格式化字符串的方法"><span class="nav-number">10.</span> <span class="nav-text">实现能接受格式化字符串的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符与字符串组件"><span class="nav-number">11.</span> <span class="nav-text">字符与字符串组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多行文字字面量"><span class="nav-number">12.</span> <span class="nav-text">多行文字字面量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#可变字符串"><span class="nav-number">13.</span> <span class="nav-text">可变字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建字符串"><span class="nav-number">14.</span> <span class="nav-text">创建字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#替换字符串"><span class="nav-number">15.</span> <span class="nav-text">替换字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接组件"><span class="nav-number">16.</span> <span class="nav-text">连接组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象描述"><span class="nav-number">17.</span> <span class="nav-text">对象描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NSManagedObject子类的描述"><span class="nav-number">18.</span> <span class="nav-text">NSManagedObject子类的描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件路径"><span class="nav-number">19.</span> <span class="nav-text">文件路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#传递路径到UNIX-API"><span class="nav-number">20.</span> <span class="nav-text">传递路径到UNIX API</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">vvard3n</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'vvard3nsblog';
      var disqus_identifier = '2014/06/07/iosstring/';
      var disqus_title = "iOS开发之玩转字符串";
      var disqus_url = 'http://nvar.xyz/2014/06/07/iosstring/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  

  

  

</body>
</html>
